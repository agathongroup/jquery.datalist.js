$.fn.datalist=function(){return typeof this[0].list==="object"&&document.createElement("datalist")&&window.HTMLDataListElement?this:this.each(function(){var a=$(this),d=$("#"+a.attr("list")),e=a.offset(),c=$("<ul>",{"class":"datalist",css:{width:a.width(),position:"absolute",left:e.left,top:e.top+a.height()+6,margin:0,padding:"0 2px","list-style":"none",border:"1px solid #ccc","-moz-box-shadow":"0px 2px 3px #ccc","-webkit-box-shadow":"0px 2px 3px #ccc","box-shadow":"0px 2px 3px #ccc","z-index":99,
background:"#fff",cursor:"default"}}),b="";if(d.length){d.find("option").each(function(g,f){b+="<li>";b+='<span class="value">'+f.value+"</span>";b+='<span class="label" style="float:right">'+f.label+"</span>";b+="</li>"});c.html(b).hide().appendTo("body").delegate("li","mousedown",function(){a.val($(this).find("span.value").text())});a.focus(function(){c.show()}).blur(function(){c.hide()})}})};
